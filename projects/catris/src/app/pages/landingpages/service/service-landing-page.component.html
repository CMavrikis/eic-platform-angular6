<div *ngIf="errorMessage" class="tm-main uk-section uk-section-default" uk-height-viewport="expand: true" style="box-sizing: border-box;">
  <div class="uk-container uk-container">
    <div data-uk-alert="" class="uk-alert uk-alert-danger">
      <p>{{errorMessage}}</p>
    </div>
  </div>
</div>

<div *ngIf="richService && !errorMessage">
  <div class="tm-main uk-section uk-section-secondary" uk-height-viewport="expand: true" style="box-sizing: border-box;">
    <div class="uk-container">
      <div class="uk-grid" uk-grid="">
        <div class="uk-width-2-3">
          <div class="uk-display-inline-block uk-vertical-align-top">
            <h2 class="uk-h2 uk-inline" style="margin-bottom: 5px">
              {{richService.service.name || "Not Available"}}

              <span class="uk-margin-left" *ngIf="canEditService">
                <a (click)="this.router.edit(richService.service.id)" routerLinkActive="active">
                  <i class="fa fa-pencil"></i></a>
              </span>
            </h2>
            <div *ngIf="richService.service.tagline && (richService.service.tagline.length > 0)" class="tagLine">
              {{richService.service.tagline}}
            </div>
            <div>
              <star-rating-comp #rating (click)="rateService(rating.rating)"
                                [starType]="'svg'" [rating]="richService.hasRate" [step]="1"
                                [showHalfStars]="true"
                                [readOnly]=!this.authenticationService.isLoggedIn()
                                [size]="'medium'"
                                [staticColor]="'ok'" title="Rate this service"
                                uk-tooltip="delay: 500" class="uk-inline starRating"
                                labelText="{{richService.hasRate}} ({{ richService.ratings }})"
                                [labelVisible]="true" [labelPosition]="'right'"
                                [hoverEnabled]="true">
              </star-rating-comp>
              <span class="uk-margin-medium-left">
                    <a (click)="addToFavourites()">
                        <i [ngClass]="richService.isFavourite?'fa fa-heart':'fa fa-heart-o'"></i>
                    </a>
                    <span class="statsNumbers">{{richService.favourites || 0}}</span>
                  </span>
              <span class="uk-margin-medium-left">
                      <img src="../../../../assets/images/icons/ic_visit_icon.svg">
                      <span class="statsNumbers">{{richService.views || 0}}</span>
                  </span>
            </div>
            <div class="tags" *ngIf="richService.superCategoryName && richService.categoryName && richService.subCategoryNames !== []">
              <span><strong>Categorization: </strong></span>
              <span class="uk-label">{{richService.superCategoryName}}</span>
              <span> --> </span>
              <span class="uk-label">{{richService.categoryName}}</span>
              <span> --> </span>
              <span class="uk-label">{{richService.subCategoryNames}}</span>
            </div>

            <div class="tags" *ngIf="richService.scientificDomainNames && richService.scientificSubDomainNames">
              <span><strong>Scientific Categorization: </strong></span>
              <span class="uk-label">{{richService.scientificDomainNames}}</span>
              <span> --> </span>
              <span class="uk-label">{{richService.scientificSubDomainNames}}</span>
            </div>

            <div class="serviceDescription" *ngIf="richService.service.description">
              <p [innerHTML]="richService.service.description">
              </p>
            </div>

            <div class="badges uk-margin-bottom">
              <span *ngFor="let tag of richService.service.tags" class="uk-badge uk-margin-small-right">{{tag}}</span>
            </div>

            <div>
              <a class="uk-button butn theme" href="{{richService.service.url}}" target="_blank"
                 routerLinkActive="active">
                <!--<a class="uk-width-1-1 uk-button uk-button-primary visitButton" href="{{richService.url}}" target="_blank" routerLinkActive="active">-->
                <strong>Service Homepage</strong>
              </a>
              <a *ngIf="richService.service.order" class="uk-button butn theme uk-margin-left"
                 href="{{richService.service.order}}" routerLinkActive="active" target="_blank">
                <strong>Service order</strong>
              </a>
            </div>

          </div>
        </div>
        <div class="uk-width-1-3">
          <div class="uk-card uk-card-body uk-card-custom providerCard">
            <img src="{{(richService.service.logo) ? richService.service.logo : 'http://fvtelibrary.com/img/user/NoLogo.png'}}">
            <span class="provider" *ngFor="let provider of richService.service.providers; let i = index">
              <br *ngIf="i > 0">{{ provider | uppercase }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tm-main uk-section uk-section-default" uk-height-viewport="expand: true"
       style="box-sizing: border-box;">
    <div class="uk-container">
      <div class="uk-grid" uk-grid="">
        <div class="uk-width-2-3">

          <!--USAGE-->
          <div>
            <h2 class="section-heading uk-h2">Usage</h2>
            <dl class="uk-description-list">
              <div *ngIf="richService.service.trl" class="uk-margin-bottom">
                <dt class="uk-margin-small-right">Technology readiness level</dt>
                <dd class="">{{richService.trlName}}</dd>
              </div>
              <div *ngIf="richService.phaseName" class="uk-margin-bottom">
                <dt class="uk-margin-small-right">Lifecycle Status</dt>
                <dd class="">{{richService.phaseName}}</dd>
              </div>
            </dl>
            <!--<hr class="customDivider">-->
            <dl class="uk-description-list">
              <dt class="">Access type</dt>
              <dd>{{richService.accessTypeNames}}</dd>
              <dt class="">Access mode</dt>
              <dd>{{richService.accessModeNames}}</dd>
              <ng-container *ngIf="richService.service.options">
                <dt class="">Options</dt>
                <dd>{{richService.service.options}}</dd>
              </ng-container>
              <ng-container *ngIf="richService.targetUsersNames">
                <dt class="">Target Users</dt>
                <dd>{{richService.targetUsersNames}}</dd>
              </ng-container>
              <ng-container *ngIf="richService.service.userValue">
                <dt class="">User value</dt>
                <dd>{{richService.service.userValue}}</dd>
              </ng-container>
              <ng-container *ngIf="richService.service.userBases">
                <dt class="">User base</dt>
                <dd>{{richService.service.userBases}}</dd>
              </ng-container>
                <dt class="">Use cases</dt>
                <dd>{{richService.service.useCases}}</dd>
            </dl>
          </div>

          <!--SERVICE COVERAGE-->
          <div class="uk-margin-medium-top">
            <h2 class="section-heading uk-h2">Service coverage</h2>
            <div class="uk-grid">
              <div class="uk-width-3-5">
                <div style="width:100%; border: 1px solid #dedede" *ngIf="serviceMapOptions">
                  <chart type="Map" [options]="serviceMapOptions"></chart>
                </div>
              </div>
              <div class="uk-width-2-5">
                <dl class="uk-description-list">
                  <ng-container *ngIf="richService.placeNames && richService.placeNames.length>0">
                    <dt class="">Places</dt>
                    <dd>
                      <span>{{richService.placeNames | join:", "}}</span>
                    </dd>
                  </ng-container>
                  <ng-container *ngIf="richService.languageNames && richService.languageNames.length>0">
                    <dt class="">Languages</dt>
                    <dd>
                      <span>{{richService.languageNames | join:", "}}</span>
                    </dd>
                  </ng-container>
                </dl>
              </div>
            </div>
          </div>

          <!--FUNDING-->
          <div *ngIf="richService.fundedByNames" class="uk-margin-medium-top">
            <h2 class="section-heading uk-h2">Funding</h2>
            <dl class="uk-description-list">
              <!--<dt class="uk-margin-small-bottom">Funding sources</dt>-->
              <dd>{{richService.fundedByNames}}</dd>
            </dl>
          </div>

        </div>
        <div class="uk-width-1-3">

          <div class="uk-card uk-card-body uk-card-primary sideInfo">
            <h2 class="uk-h2 sidebarHeaders">Contractual Info</h2>
            <!--TODO remove hardcoded-->
            <div class="uk-margin-bottom" style="font-size: 17px">
              Fully open Access
            </div>
            <div *ngIf="richService.service.pricing" class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.pricing}}">
                Price <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
            <div *ngIf="richService.service.sla" class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.sla}}">
                Service level agreement <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
            <ng-container *ngIf="richService.service.termsOfUse">
              <div class="uk-margin-small-bottom">
                <a class="uk-margin-small-right" target="_blank" href="{{richService.service.termsOfUse}}">
                  Terms of use <i class="fa fa-long-arrow-right"></i>
                </a>
              </div>
<!--              <ng-container *ngIf="richService.termsOfUse.length>1">-->
<!--                <div *ngFor="let term of richService.termsOfUse; let i = index;"-->
<!--                     class="uk-margin-small-bottom">-->
<!--                  <a class="uk-margin-small-right" target="_blank" href="{{richService.termsOfUse[i]}}">-->
<!--                    Terms of use {{i + 1}} <i class="fa fa-long-arrow-right"></i>-->
<!--                  </a>-->
<!--                </div>-->
<!--              </ng-container>-->
            </ng-container>
            <div class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.privacyPolicy}}">
                Privacy policy <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
            <div class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.accessPolicy}}">
                Access policy <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
            <div class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.paymentModel}}">
                Payment model <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
          </div>

          <div class="uk-card uk-card-body uk-card-primary sideInfo uk-margin-top">
            <h2 class="uk-h2 sidebarHeaders">Support</h2>
            <div *ngIf="richService.service.manual" class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.manual}}">
                Manual <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
            <div *ngIf="richService.service.training" class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.training}}">
                Training <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
            <div *ngIf="richService.service.helpdesk" class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.helpdesk}}">
                Helpdesk <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
<!--            <div *ngIf="richService.feedback" class="uk-margin-small-bottom">-->
<!--              <a class="uk-margin-small-right" target="_blank" href="{{richService.feedback}}">-->
<!--                Feedback <i class="fa fa-long-arrow-right"></i>-->
<!--              </a>-->
<!--            </div>-->
            <div *ngIf="richService.service.monitoring" class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.monitoring}}">
                Monitoring <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>

            <div *ngIf="richService.service.maintenance" class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank" href="{{richService.service.maintenance}}">
                Maintenance <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
<!--            TODO remove hardcoded-->
<!--            <div class="uk-margin-small-bottom">-->
<!--              <a class="uk-margin-small-right" target="_blank"-->
<!--                 href="{{richService.service.multimediaUrls}}">-->
<!--                Multimedia <i class="fa fa-long-arrow-right"></i>-->
<!--              </a>-->
<!--            </div>-->
            <div *ngIf="richService.service.multimediaUrls" class="uk-margin-small-bottom">
              <a class="uk-margin-small-right" target="_blank"
                 href="{{richService.service.multimediaUrls}}">
                Multimedia <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
          </div>

          <div class="uk-card uk-card-body uk-card-primary sideInfo uk-margin-top">
            <h2 class="uk-h2 sidebarHeaders">Contact</h2>
            <dl class="uk-description-list">
                <dt class="">Owner</dt>
                <dd>
                  <a class="uk-margin-small-right" target="_blank" href="{{richService.service.ownerContact}}">
                    {{richService.service.ownerName}} <i class="fa fa-envelope"></i>
                  </a>
                </dd>
            </dl>
          </div>

          <!--<h4 class="uk-h4 sidebarHeaders uk-margin-medium-top">Version</h4>-->
          <!--<hr class="customDivider">-->
          <div class="uk-margin-top">
            <div *ngIf="richService.service.version" class="">
              <span class="infoTitle uk-margin-small-right">Version</span>
              <span class="infoDescription">{{richService.service.version}}</span>
            </div>
            <div *ngIf="richService.service.lastUpdate" class="">
              <span class="infoTitle uk-margin-small-right">Last update</span>
              <span class="infoDescription">{{ richService.service.lastUpdate | date }}</span>
            </div>
            <!--TODO remove hardcoded-->
            <div class="">
              <span class="infoDescription">
                The changelog and roadmap are maintained at <a href="https://help.zenodo.org/whatsnew/">https://help.zenodo.org/whatsnew/</a> and
                <a href="https://about.zenodo.org/roadmap/">https://about.zenodo.org/roadmap/</a>
              </span>
            </div>
            <!--<div *ngIf="richService.changeLog" class="">-->
              <!--<span class="infoTitle uk-margin-small-right">What's new</span>-->
              <!--<span class="infoDescription">{{richService.changeLog}}</span>-->
            <!--</div>-->
<!--            <div *ngIf="richService.validFor" class="">-->
<!--              <span class="infoTitle uk-margin-small-right">Validity</span>-->
<!--              <span class="infoDescription">Until {{ richService.validFor | date }}</span>-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--            <div *ngIf="richService.availability" class="">-->
<!--              <span class="infoTitle uk-margin-small-right">Availability</span>-->
<!--              <span class="infoDescription">{{richService.availability}}</span>-->
<!--            </div>-->
          </div>

          <!--<h4 class="uk-h4 sidebarHeaders uk-margin-medium-top">See also</h4>-->
          <!--<hr class="customDivider">-->
          <h2 class="uk-h2 sidebarHeaders section-heading uk-margin-medium-top">See also</h2>
          <!--<dl class="uk-description-list">-->
          <ng-container *ngIf="richService.service.requiredServices && (richService.service.requiredServices.length > 0)">
            <dt class="infoTitle uk-margin-small-right">Required services</dt>
            <!--<dt class="uk-margin-small-bottom">Required richServices</dt>-->
            <dd *ngFor="let requiredService of richService.service.requiredServices">
              <a (click)="this.router.service(getPrettyService(requiredService).service.id)">{{getPrettyService(requiredService).service.name}}</a>
            </dd>
          </ng-container>
          <ng-container *ngIf="!richService.service.requiredServices || richService.service.requiredServices.length == 0">
            <dt class="infoTitle uk-margin-small-right">Required services</dt>
            <dd>
              None
            </dd>
          </ng-container>
          <ng-container *ngIf="richService.service.relatedServices && richService.service.relatedServices.length>0">
            <dt class="infoTitle uk-margin-small-right">Related services</dt>
            <dd *ngFor="let relatedService of richService.service.relatedServices">
              <a (click)="this.router.service(getPrettyService(relatedService).service.id)">{{getPrettyService(relatedService).service.name}}</a>
            </dd>
          </ng-container>
          <ng-container *ngIf="!richService.service.relatedServices || richService.service.relatedServices.length == 0">
            <dt class="infoTitle uk-margin-small-right">Related services</dt>
            <dd>
              None
            </dd>
          </ng-container>

        </div>
      </div>
    </div>
  </div>
</div>
